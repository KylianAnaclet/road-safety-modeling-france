knitr::opts_chunk$set(echo = TRUE)
df = read.csv('donnees_regroupees.csv')
classes_colonne = sapply(df, class)
df_non_integer = df[, classes_colonne != "integer"]
#colnames(df_non_integer)
#install.packages("dplyr")
library(dplyr)
variables_qualitatives = colnames(df_non_integer)
# On supprime les lignes avec NA dans les variables qualitatives
donnees_sans_na = df %>% na.omit(select(variables_qualitatives))
# On transforme mes qualitatives en factors
donnees_sans_na[, variables_qualitatives] = lapply(donnees_sans_na[, variables_qualitatives], as.factor)
# One-hot encoding avec model.matrix()
dummies = model.matrix(as.formula(paste("~", paste(variables_qualitatives, collapse = "+"), "-1")), data = donnees_sans_na)
data_final = cbind(donnees_sans_na[, setdiff(names(donnees_sans_na), variables_qualitatives)], dummies)
# Décommentez la ligne suivant si vous voulez générer le fichier csv
# write.csv(data_final, "../data/data_sans_na_one_hot_encoded.csv", row.names = FALSE)
data_final = scale(data_final)
# Pour vérifier si les données sont bien normalisées
#round(colMeans(data_final), 5)
#apply(data_final, 2, var)
data_final = scale(data_final)
# Pour vérifier si les données sont bien normalisées
#round(colMeans(data_final), 5)
#apply(data_final, 2, var)
#install.packages("factoextra")
library(factoextra)
install.packages("factoextra")
#install.packages("factoextra")
library(factoextra)
echantillon = data_final[sample(nrow(data_final), 15000), ]
fviz_nbclust(echantillon, kmeans, method = "wss") + geom_vline(xintercept = 4, linetype = 2)
install.packages(c("cluster", "factoextra"))
install.packages(c("cluster", "factoextra"))
